<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>nx_metadata_sdk: LibContext and RefCountableRegistry mechanisms</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">nx_metadata_sdk
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Metadata SDK</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">LibContext and RefCountableRegistry mechanisms </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>// Copyright 2018-present Network Optix, Inc. Licensed under MPL 2.0: www.mozilla.org/MPL/2.0/</p>
<p>This document describes the SDK's "hidden" (working automatically) mechanism called LibContext.</p>
<p>Each dynamic library which encorporates nx/sdk/helpers/lib_context.cpp, such as a Plugin's dynamic library and the main dynamic library of the Server, owns its instance of <a class="el" href="classnx_1_1sdk_1_1_i_lib_context.html">nx::sdk::ILibContext</a> (<code>src/nx/sdk/lib_context.h</code>). This instance is owned in a static variable in a local (non-exported) function <code>libContext()</code> defined in <code>src/nx/sdk/lib_context.cpp</code>.</p>
<p>The Server can access the LibContext instance of each Plugin, because that .cpp also exports a C-style function <code>ILibContext* nxLibContext()</code> which returns a pointer to the LibContext instance. After loading a Plugin, the Server creates a dedicated instance of <code><a class="el" href="classnx_1_1sdk_1_1_i_ref_countable_registry.html">nx::sdk::IRefCountableRegistry</a></code>, and supplies it to this instance of LibContext. Also, the Server creates an instance of the registry for its own use, and supplies it to its own LibContext. The implementation of <code><a class="el" href="classnx_1_1sdk_1_1_i_ref_countable_registry.html">nx::sdk::IRefCountableRegistry</a></code> resides in the Server and is not part of the SDK.</p>
<p>The interface <code><a class="el" href="classnx_1_1sdk_1_1_i_ref_countable_registry.html">nx::sdk::IRefCountableRegistry</a></code> offers just two methods: notify about object creation, and object deletion. The class <code><a class="el" href="classnx_1_1sdk_1_1_ref_countable.html">nx::sdk::RefCountable</a></code> (the recommended base class for all ref-countable objects) calls them before attempting the respective operations, taking the RefCountableRegistry instance from the LibContext instance of the current library.</p>
<p>For more details, see the Doxygen comments in the above mentioned source code files. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
